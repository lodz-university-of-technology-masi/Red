<!DOCTYPE html>
<html  xmlns:th="http://www.thymeleaf.org">
<head>
    <th:block th:include="includes :: header" />

</head>
<body>

<th:block th:include="includes :: menu" />

<div class="container mt-lg-5">
    <ul class="nav nav-tabs nav-justified" id="myTab" role="tablist">
        <li class="nav-item">
            <a class="nav-link active" id="home-tab" data-toggle="tab" href="#redaktor" role="tab" aria-controls="home" aria-selected="true">Redaktor</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" id="profile-tab" data-toggle="tab" href="#stanowisko" role="tab" aria-controls="profile" aria-selected="false">Stanowisko</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" id="contact-tab" data-toggle="tab" href="#test" role="tab" aria-controls="contact" aria-selected="false">Test</a>
        </li>
    </ul>
    <div class="tab-content" id="myTabContent">

        <!-- REDAKTOR PANEL --><!-- REDAKTOR PANEL --><!-- REDAKTOR PANEL --><!-- REDAKTOR PANEL --><!-- REDAKTOR PANEL --><!-- REDAKTOR PANEL --><!-- REDAKTOR PANEL --><!-- REDAKTOR PANEL -->

        <div class="tab-pane fade show active" id="redaktor" role="tabpanel" aria-labelledby="home-tab">

            <button class="btn btn-outline-success btn-block mt-5 mb-5" data-toggle="modal" data-target="#createEditor"><i class="material-icons md-24">add_circle</i> Dodaj Redaktora</button>

            <table class="table">
                <thead>
                <tr>
                    <th>ID</th>
                    <th>Imię</th>
                    <th>Nazwisko</th>
                    <th>Opcje</th>
                </tr>
                </thead>
                <tbody id="resultEditor">
                <td>0</td>
                <td>Jan</td>
                <td>Kowalski</td>
                <td>
                    <button class="btn btn-sm btn-outline-info " data-toggle="modal" data-target="#updateEditor"><i class="material-icons md-24">add_circle_outline</i> Edytuj Redaktora</button>
                    <button id="0" class="btn btn-sm btn-outline-danger deleteButton" type="button"><i class="material-icons md-24">remove_circle_outline</i> Usuń Redaktora</button>
                </td>
                </tbody>
            </table>

        </div>

        <!-- STANOWSIKO PANEL --><!-- STANOWSIKO PANEL --><!-- STANOWSIKO PANEL --><!-- STANOWSIKO PANEL --><!-- STANOWSIKO PANEL --><!-- STANOWSIKO PANEL --><!-- STANOWSIKO PANEL --><!-- STANOWSIKO PANEL -->

        <div class="tab-pane fade" id="stanowisko" role="tabpanel" aria-labelledby="profile-tab">
            Stanowisko...
        </div>

        <!-- TEST PANEL --><!-- TEST PANEL --><!-- TEST PANEL --><!-- TEST PANEL --><!-- TEST PANEL --><!-- TEST PANEL --><!-- TEST PANEL --><!-- TEST PANEL --><!-- TEST PANEL --><!-- TEST PANEL -->

        <div class="tab-pane fade" id="test" role="tabpanel" aria-labelledby="contact-tab">
            Test...
        </div>

    </div>
</div>

    <!-- MODAL PANELS --><!-- MODAL PANELS --><!-- MODAL PANELS --><!-- MODAL PANELS --><!-- MODAL PANELS -->

    <!-- The Modal N E W   E D I T O R -->
    <div class="modal" id="createEditor">
        <div class="modal-dialog">
            <div class="modal-content">

                <!-- Modal Header -->
                <div class="modal-header">
                    <h4 class="modal-title">Dodaj Redaktora</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>

                <!-- Modal body -->
                <div class="modal-body">
                    <form id="FormCreateEditor">

                        <div class="form-group row">
                            <label for="FCEName" class="col-sm-2 col-form-label">Imie</label>
                            <div class="col-sm-10">
                                <input type="text" class="form-control" id="FCEName" name="FCEName">
                            </div>
                        </div>

                        <div class="form-group row">
                            <label for="FCESurname" class="col-sm-2 col-form-label">Nazwisko</label>
                            <div class="col-sm-10">
                                <input type="text" class="form-control" id="FCESurname" name="FCESurname">
                            </div>
                        </div>

                    </form>
                </div>

                <!-- Modal footer -->
                <div class="modal-footer">
                    <button id="FormCreateButton" type="button" class="btn btn-success" >Zapisz</button>
                    <button type="button" class="btn btn-outline-danger" data-dismiss="modal">Close</button>
                </div>

            </div>
        </div>
    </div>

    <!-- The Modal E D I T   E D I T O R -->
    <div class="modal" id="updateEditor">
        <div class="modal-dialog">
            <div class="modal-content">

                <!-- Modal Header -->
                <div class="modal-header">
                    <h4 class="modal-title">Dodaj Redaktora</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>

                <!-- Modal body -->
                <div class="modal-body">
                    <form id="FormUpdateEditor">

                        <div class="form-group row">
                            <label for="FUEID" class="col-sm-2 col-form-label">ID</label>
                            <div class="col-sm-10">
                                <input type="text" class="form-control" id="FUEID" name="FUEID" readonly>
                            </div>
                        </div>

                        <div class="form-group row">
                            <label for="FUEName" class="col-sm-2 col-form-label">Imie</label>
                            <div class="col-sm-10">
                                <input type="text" class="form-control" id="FUEName" name="FUEName">
                            </div>
                        </div>

                        <div class="form-group row">
                            <label for="FUESurname" class="col-sm-2 col-form-label">Nazwisko</label>
                            <div class="col-sm-10">
                                <input type="text" class="form-control" id="FUESurname" name="FUESurname">
                            </div>
                        </div>

                    </form>
                </div>

                <!-- Modal footer -->
                <div class="modal-footer">
                    <button id="FormUpdateButton" type="button" class="btn btn-success" >Aktualizuj</button>
                    <button type="button" class="btn btn-outline-danger" data-dismiss="modal">Close</button>
                </div>

            </div>
        </div>
    </div>

<script>

    window.onload = function () {

        // $.get( "/redaktor/all", function( data ) {
        //
        //     console.log(data);
        //
        // });

        // $.get( "/stanowisko/all", function( data ) {
        //
        //     console.log(data);
        //
        // });

    }


    editor_api = "/redaktor/";

    $(document).ready(function() {

        $("#FormCreateButton").click(function () {

            var dataForm = $('#FormCreateEditor').serializeArray();

            console.log(dataForm);

            $.post(editor_api + dataForm[0].value + "/" + dataForm[1].value,
                function (data) {
                    console.log(data);

                    setTimeout(function(){
                        window.location.reload(true);
                    }, 2000);


                });

        });

        $("#FormUpdateButton").click(function () {

            var dataForm = $('#FormUpdateEditor').serializeArray();

            console.log(dataForm);

            $.ajax({
                type: "PUT",
                url: editor_api + dataForm[0].value + "/" + dataForm[1].value + "/" + dataForm[2].value,
                success: function(data) {
                    console.log(data);

                    setTimeout(function(){
                        window.location.reload(true);
                    }, 2000);
                }
            });

        });

        $(".deleteButton").click(function(event){
            console.log(event.target.id);

            $.ajax({
                type: "DELETE",
                url: editor_api + event.target.id,
                success: function(data) {
                    console.log(data);

                    setTimeout(function(){
                        window.location.reload(true);
                    }, 1000);
                }
            });

        });


    });



</script>

</body>
</html>